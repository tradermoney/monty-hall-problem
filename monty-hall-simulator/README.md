# 蒙提霍尔问题模拟器

一个交互式的蒙提霍尔问题模拟器，支持手动游戏模式、自动仿真、统计分析、数据导出等功能。

## 功能特性

### 🎮 手动游戏模式
- 交互式三门问题游戏
- 实时显示游戏结果
- 支持切换策略
- 游戏历史记录

### 🤖 自动仿真模式
- 批量仿真运行
- 可配置参数（门的数量、仿真次数、批次大小等）
- 多种主持人模型（经典、无知、有偏、有时沉默）
- 多种玩家策略（从不切换、总是切换、随机切换）
- 进度条显示
- 实时统计更新

### 📊 统计分析
- 胜率对比图表
- 胜负分布饼图
- 详细统计表格
- 批次胜率趋势图
- 置信区间计算
- 标准误差分析

### ⚙️ 参数配置
- 总运行次数设置
- 门的数量配置
- 批次大小调整
- 主持人模型选择
- 玩家策略选择
- 随机种子设置
- 预设配置快速应用

### 🌐 国际化支持
- 中文界面
- 英文界面
- 实时语言切换

### 🎨 主题切换
- 浅色主题
- 深色主题
- 自动主题（跟随系统）
- 高对比度支持

### ♿ 无障碍支持
- 键盘导航
- 屏幕阅读器支持
- ARIA 标签
- 高对比度模式
- 减少动画选项

### 📁 数据管理
- 导出统计数据（JSON）
- 导出完整数据（JSON）
- 导出统计数据（CSV）
- 导入数据
- 生成示例数据

## 技术栈

- **前端框架**: React 18
- **状态管理**: Zustand
- **路由**: React Router
- **国际化**: react-i18next
- **图表**: Recharts
- **样式**: CSS 变量 + 模块化 CSS
- **构建工具**: Vite
- **测试**: Vitest + React Testing Library
- **类型**: TypeScript

## 安装和运行

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

### 生产构建
```bash
npm run build
```

### 运行测试
```bash
npm test
```

### 运行测试（监听模式）
```bash
npm run test:watch
```

### 代码检查
```bash
npm run lint
```

## 项目结构

```
src/
├── components/          # React 组件
│   ├── AutoSimulation/  # 自动仿真组件
│   ├── DataManager/     # 数据管理组件
│   ├── LanguageSwitcher/# 语言切换器
│   ├── ManualGame/     # 手动游戏组件
│   ├── ParameterPanel/ # 参数配置面板
│   ├── Settings/       # 设置页面
│   ├── StatisticsCharts/ # 统计图表组件
│   └── ThemeSwitcher/  # 主题切换器
├── stores/             # 状态管理
│   ├── gameStore.ts    # 游戏状态
│   ├── simulationStore.ts # 仿真状态
│   └── themeStore.ts   # 主题状态
├── utils/              # 工具函数
│   ├── accessibility.ts # 无障碍功能
│   ├── dataExportImport.ts # 数据导出导入
│   └── simulator.ts    # 蒙提霍尔仿真器
├── i18n/               # 国际化
│   └── index.ts        # i18n 配置
├── types/              # TypeScript 类型定义
└── __tests__/          # 测试文件

```

## 使用说明

### 手动游戏模式
1. 点击"开始游戏"按钮
2. 选择一扇门
3. 主持人会打开另一扇门
4. 选择是否切换门
5. 查看游戏结果

### 自动仿真模式
1. 设置仿真参数（门的数量、仿真次数等）
2. 选择主持人模型和玩家策略
3. 点击"开始仿真"按钮
4. 查看实时进度和统计结果

### 数据分析
- 查看胜率对比图表
- 分析胜负分布
- 观察批次胜率趋势
- 查看详细统计表格

### 数据导出
- 导出统计数据用于进一步分析
- 导出完整数据包含所有仿真记录
- 导出CSV格式便于Excel分析
- 导入之前导出的数据

## 主持人模型说明

### 经典模型（Classic）
- 主持人知道哪扇门后有奖品
- 主持人一定会打开一扇有山羊的门
- 主持人不会打开玩家选择的门

### 无知模型（Ignorant）
- 主持人不知道哪扇门后有奖品
- 主持人随机选择一扇门打开
- 可能意外打开有奖品的门

### 有偏模型（Biased）
- 主持人知道奖品位置
- 主持人有偏好地选择要打开的门
- 偏好程度由bias参数控制

### 有时沉默模型（Sometimes Silent）
- 主持人有时会选择不打开任何门
- 沉默概率由silentProbability参数控制
- 增加游戏的复杂性

## 玩家策略说明

### 从不切换（Never Switch）
- 玩家始终坚守最初的选择
- 胜率 = 1/门的数量

### 总是切换（Always Switch）
- 玩家总是切换到剩下的未打开的门
- 经典三门问题中胜率为2/3

### 随机切换（Random Switch）
- 玩家随机决定是否切换
- 胜率介于从不切换和总是切换之间

## 数学原理

蒙提霍尔问题是一个经典的概率问题。在经典的三门问题中：

- 初始选择正确的概率：1/3
- 初始选择错误的概率：2/3
- 如果初始选择正确，切换会输
- 如果初始选择错误，切换会赢

因此，总是切换策略的胜率为2/3，而从不切换策略的胜率为1/3。

## 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发规范
- 使用 TypeScript 进行开发
- 遵循现有的代码风格
- 为新功能编写测试用例
- 更新相关文档

### 提交规范
- 使用清晰的提交信息
- 关联相关的 Issue
- 确保所有测试通过

## 许可证

MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issue
- 发送邮件至项目维护者

---

**享受蒙提霍尔问题的探索之旅！** 🎲✨
